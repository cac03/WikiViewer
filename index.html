<!DOCTYPE html>
<html>
	<head>
		<title>Wikipedia viewer</title>
		<meta charset="utf-8">
		<link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
		<link href = 'https://necolas.github.io/normalize.css/3.0.2/normalize.css' rel = 'stylesheet' type = 'text/css'>
		<link href = "https://en.wikipedia.org/w/load.php?modules=mediawiki.legacy.commonPrint,shared|mediawiki.skinning.elements|mediawiki.skinning.content|mediawiki.skinning.interface|skins.vector.styles|site|mediawiki.skinning.content.parsoid|ext.cite.style|mediawiki.page.gallery.styles|mediawiki.raggett&only=styles&skin=vector" rel = "stylesheet">
		<link href = "css/fontello.css" rel = "stylesheet" type = "text/css">
		<link href = "css/animate.css" rel = "stylesheet" type = "text/css">
		<link href = "css/loader.min.css" rel = "stylesheet" type = "text/css">
		<link href = "css/style.css" rel = "stylesheet" type = "text/css">

	</head>
	<body>
		<div class = "animation-wrap">
			<div class = "moar-wrap">
				<div class="loader-inner ball-clip-rotate"><div></div></div>
			</div>
		</div>
		<div class = "not-footer">
		<header class = "header">
			<nav class = "container">
				<h3 class = "nav-header">Simple Wikiperdia viewer</h3
				><div class = "contacts-wrap"><span class = "nav-label">Contact me: </span
					><ul class = "social-links-wrap">
						<li class = "social-link-item"><a href = "http://twitter.com/2caco3" target = "_blank"><i class = "icon-twitter"></i>Twitter</a></li
						><li class = "social-link-item"><a href = "mailto:libecac@gmail.com" target = "_blank"><i class = "icon-mail"></i>E-mail</a></li
						><li class = "social-link-item"><a href = "http://www.freecodecamp.com/cac03" target = "_blank"><i class = "icon-fcc"></i>FCC</a></li
						><li class = "social-link-item"><a href = "https://github.com/cac03" target = "_blank"><i class = "icon-github-circled"></i>GitHub</a></li
						><li class = "social-link-item"><a href = "https://telegram.me/cac03" target = "_blank"><i class = "icon-telegram_logo"></i>Telegram</a></li>
					</ul>
				</div>
			</nav>
		</header>
		<div class = "container main-wrap">
				<div class = "main-header">Simple Wikipedia viewer</div>
				<div class = "view-before-icon-click">
					<img class = "magnifier-btn" src="data:image/png;base64,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" width = "64px" height = "64px" alt = "magnifier icon">
					<p>Click icon to search <a class = "random-search-btn" href = "#">or try a random search request.</a></p>
				</div>
				<form class = "search-wrap hide-content">
					<input class = "search-box" type = "text" placeholder = "Search in Wikipedia"
					><span class = "clear-icon"></span><img class = "magnifier-icon" src="data:image/png;base64,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" width = "20px" height = "20px" alt = "magnifier icon">

					<p class = "nothing-found hide-content">Oops... Nothing found:(</p>
					<div class = "suggestions">
					</div>
				</form>

				<ul class="articles-wrapper"></ul>

			</div>
		</div>
		<div class = "modal-article">

			<div class = "article-container">
				<article class = "wiki-article clearfix">

				</article>
				<div class = "close-article-btn"></div>
			</div>
		</div>
		<footer class = "main-footer">
			<div class = "container">
				Used: <a class = "footer-link" href = "https://daneden.github.io/animate.css/">Animate.css</a> <a class = "footer-link" href = "https://connoratherton.com/loaders">Loaders.css</a> <a class = "footer-link" href = "http://fontello.com/">fontello</a> <a class = "footer-link" href = "https://necolas.github.io/normalize.css/">Normalize.css</a> and <a class = "footer-link" href = "#">Wikipedia API</a> <a class = "footer-link" href = "https://www.google.com/fonts">Google Fonts</a>.
				<br>
				Magnifier icon took from <a class = "footer-link" href = "http://www.flaticon.com/free-icon/magnifier_34202">here</a>
				<p>Thanks them all</p>
			</div>
		</footer>
		<script>
			'use strict';
			var Cache = {};
			function RequestScript(Url, OnSuccess, OnError, ToSearch){
				ToSearch = encodeURIComponent(ToSearch);
				//Forced do this because of not wrapping Data to function with special symbols

				var FunctionNumber = String.fromCharCode(Math.floor(Math.random() * (90 - 65 + 1)) + 65);

				var isLoaded = false;

				Url += ToSearch + '&callback=Cache.' + FunctionNumber;

				Cache[FunctionNumber] = function(data){
					isLoaded = true;
					delete Cache[FunctionNumber];
					OnSuccess(data);
				}

				function CheckCallback(){
					if (isLoaded) return;
					delete Cache[FunctionNumber];
					OnError(ToSearch);
				}

				var ScriptElement = document.createElement('script');

				ScriptElement.src = Url;
				console.log(Url);
				ScriptElement.onreadystatechange = function(){
					if (this.readyState == 'complete' || this.readyState == 'loaded'){
						this.onreadystatechange = null;
						CheckCallback();
					}
				}

				document.body.appendChild(ScriptElement);

				ScriptElement.parentNode.removeChild(ScriptElement);
			}

			function IsPrintableChar(keycode){
				return (keycode > 47 && keycode < 58)   || // number keys
				keycode == 32 || keycode == 8   || // spacebar & return key(s) (if you want to allow carriage returns)
				(keycode > 64 && keycode < 91)   || // letter keys
				(keycode > 95 && keycode < 112)  || // numpad keys
				(keycode > 185 && keycode < 193) || // ;=,-./` (in order)
				(keycode > 218 && keycode < 223);   // [\]' (in order)
			}

			var WikiArticle = document.querySelector('.wiki-article');
			var ArticleWrapper = document.querySelector('.articles-wrapper');
			var SearchBox = document.querySelector('.search-box');
			var Suggestions = document.querySelector('.suggestions');
			var NoMathes = document.querySelector('.nothing-found');

			function CreateResultsList(Url, ToSearch){
				if (SearchBox.value == '') {
					return;
				}
				document.querySelector('.animation-wrap').style.display = 'block';
				RemoveOldSuggestions();
				RequestScript(Url, function(Data){
						RemoveResultList();
						setTimeout(function(){
							if (Data[1].length == 0){
								NoMathes.classList.remove('hide-content');
								document.querySelector('.animation-wrap').style.display = 'none';
								return;
							}
							NoMathes.classList.add('hide-content');
							document.querySelector('.main-header').style.paddingTop = '20px';
							for(var i = 0; i < Data[1].length; i++){
								var Preview = document.createElement('li');

								Preview.classList.add('article-item');

								var Description = document.createElement('p');

								Description.classList.add('article-description');

								var Header = document.createElement('div');

								Header.classList.add('article-header');

								var PreviewLink = document.createElement('a');
								PreviewLink.href = Data[3][i];
								PreviewLink.classList.add('article-item-link-wrapper');
								PreviewLink.classList.add('clearfix');

								Header.innerHTML = Data[1][i];
								Description.innerHTML = Data[2][i];

								PreviewLink.appendChild(Header);
								PreviewLink.appendChild(Description);

								Preview.appendChild(PreviewLink);


								ArticleWrapper.appendChild(Preview);
								Preview.classList.add('animated', AppearAnimation);
								var AnimationListener = function(event){
									this.classList.remove('animated', AppearAnimation);
									this.removeEventListener('animationend', AnimationListener);
								}
								Preview.addEventListener('animationend', AnimationListener);

								PreviewLink.addEventListener('click', function(event){
									event.preventDefault();
									document.querySelector('.animation-wrap').style.display = 'block';
									RequestScript('https://en.wikipedia.org/w/api.php?action=parse&format=json&utf8=&page=', function(Data){
										WikiArticle.innerHTML = Data.parse.text['*'];
										document.body.style.overflowY = 'hidden';
										WikiArticle.parentNode.parentNode.style.display = 'block';
										ParseRawWikiPage();
										document.querySelector('.animation-wrap').style.display = 'none';
									},
									function(){
										console.log('Something went wrong with loading wikipedia article.');
									},
									this.children[0].innerHTML);
								});
								document.querySelector('.animation-wrap').style.display = 'none';


						}
					}, 300);
					},

					function(data){
						console.log('Something went wrong with loading result list.');
					},
					ToSearch
					);
			}

			function ParseRawWikiPage(){

				var aTags = WikiArticle.querySelectorAll('a');

				for(var i = 0; i < aTags.length; i++){
						var currentHref = aTags[i].href;

						// find 'wiki' in string
						var wikiIdx = currentHref.search('wiki');
						// form correct ling on Wikipedia
						var newHref = 'http://en.wikipedia.org/' + currentHref.substr(wikiIdx, currentHref.length);
						aTags[i].href = newHref;

						// Link will be opened in a new tab
						aTags[i].target = '_blank';
				}
			}


			var CloseArticleButton = document.querySelector('.close-article-btn');
				CloseArticleButton.addEventListener('click', function(event){
				WikiArticle.innerHTML = '';
				document.body.style.overflowY = 'scroll';
				WikiArticle.parentNode.parentNode.style.display = 'none';
			});


			function RemoveOldSuggestions(){
				var OldSuggestionItems = Suggestions.children;
				CurrentSuggestion = -1;
				while(OldSuggestionItems.length != 0)
					Suggestions.removeChild(OldSuggestionItems[0]);

			};


			function RemoveResultList(){
				var ResultList = ArticleWrapper.querySelectorAll('.article-item');

				var ResultListLength = ResultList.length;
				for(var i = 0; i < ResultListLength; i++){
						ResultList[i].classList.add('animated', FadeAnimation);
						ResultList[i].addEventListener('animationend', function(event){
							this.parentNode.removeChild(this);
						});

				}
			}

			var WikiMainUrl = 'https://en.wikipedia.org/w/api.php?action=opensearch&format=json&limit=20&redirects=resolve&format=json&search=';
			var WikiRandomUrl = 'https://en.wikipedia.org/w/api.php?action=query&list=random&format=json&rnnamespace=0&rnlimit=1';

			//returns 5 result items
			var WikiForDropDownListUrl = 'https://en.wikipedia.org/w/api.php?action=opensearch&format=json&limit=5&redirects=resolve&format=json&search='

			var ClearSearchBoxButton = document.querySelector('.clear-icon');
			var SearchWrap = document.querySelector('.search-wrap');
			var BeforeIconClickView = document.querySelector('.view-before-icon-click');
			ClearSearchBoxButton.addEventListener('click', function(event){
				console.log('click happened');
				document.querySelector('.main-header').style.paddingTop = null;


				RemoveResultList();
				RemoveOldSuggestions();
				SearchBox.value = '';
			});

			var SearchButton = document.querySelector('.magnifier-icon');
			SearchButton.addEventListener('click', function(event){
				RemoveOldSuggestions();
				CreateResultsList(WikiMainUrl, SearchBox.value);
			});



			SearchBox.addEventListener('keypress', function(event){
				if (event.keyCode == 13){
					event.preventDefault();
					RemoveOldSuggestions();
					CreateResultsList(WikiMainUrl, SearchBox.value);
					SearchBox.blur();
				}
			});

			var CurrentSuggestion = -1;

			var OldSearchRequest;
			var SuggestionItems;

			SearchBox.addEventListener('keyup', function(event){
				//Drop list

				if(IsPrintableChar(event.keyCode)){
					OldSearchRequest = SearchBox.value;
					RequestScript(WikiForDropDownListUrl, function(Data){
						RemoveOldSuggestions();
						for(var i = 0; i < Data[1].length; i++){

							var SuggestionItemInput = document.createElement('input');
							SuggestionItemInput.type = 'radio';
							SuggestionItemInput.name = 'suggestion-select';
							SuggestionItemInput.id = 'suggestion-select-btn' + i;
							SuggestionItemInput.classList.add('suggestion-radio-btn');

							Suggestions.appendChild(SuggestionItemInput);

							var SuggestionItem = document.createElement('label');
							SuggestionItem.htmlFor  = 'suggestion-select-btn' + i;
							SuggestionItem.classList.add('suggestion-item');
							SuggestionItem.innerHTML = Data[1][i];

							SuggestionItem.addEventListener('click', function(event){
								event.preventDefault();
								SearchBox.value = this.innerHTML;
								CreateResultsList(WikiMainUrl, this.innerHTML);
								Suggestions.innerHTML = '';

							});

							Suggestions.appendChild(SuggestionItem);

						}
					},

					function(data){
						console.log('Something went wrong with loading suggest list.');
					},
					SearchBox.value
					);
				}
				else{
					//Selection by arrow keys
					//Hope this is not the worst implementation
					if(event.keyCode == 40){
						SuggestionItems = Suggestions.children;
						if (CurrentSuggestion == -1) {
							CurrentSuggestion = 0;
						} else {
							if (CurrentSuggestion == SuggestionItems.length - 2){
								SuggestionItems[SuggestionItems.length - 2].checked = false;
								CurrentSuggestion = -1;
								SearchBox.value = OldSearchRequest;
								return;
							}
							CurrentSuggestion = CurrentSuggestion + 2;
						}
						SuggestionItems[CurrentSuggestion].checked = true;
						SearchBox.value = SuggestionItems[CurrentSuggestion + 1].innerHTML;
					}
					if(event.keyCode == 38){
						SuggestionItems = Suggestions.children;
						if (CurrentSuggestion == -1) CurrentSuggestion = SuggestionItems.length - 2;
						else{
							if (CurrentSuggestion == 0){
								SuggestionItems[0].checked = false;
								CurrentSuggestion = -1;
								SearchBox.value = OldSearchRequest;
								return;
							}
							CurrentSuggestion = CurrentSuggestion - 2;
						}
						SuggestionItems[CurrentSuggestion].checked = true;
						SearchBox.value = SuggestionItems[CurrentSuggestion + 1].innerHTML;
					}

				}
			});

			Suggestions.addEventListener('mouseenter', function(event){
				if(CurrentSuggestion != -1 && SuggestionItems != null){
					SuggestionItems[CurrentSuggestion].checked = false;
					CurrentSuggestion = -1;
				}
			});

			var FadeAnimation = 'fadeOutLeft';
			var AppearAnimation = 'fadeInRight';


			var MagnifierMainButton = document.querySelector('.magnifier-btn');
			MagnifierMainButton.addEventListener('click', function(event){


				//Animation
				BeforeIconClickView.classList.add('animated', FadeAnimation);
				function Listener(event){
					this.classList.add('hide-content');
					this.classList.remove('animated', FadeAnimation);


					SearchWrap.classList.remove('hide-content');
					SearchWrap.classList.add('animated', AppearAnimation);
					function ListenerForSearchWrap(event){
						this.classList.remove('animated', AppearAnimation);
						SearchBox.focus();
						this.removeEventListener('animationend', ListenerForSearchWrap);
					}
					SearchWrap.addEventListener('animationend', ListenerForSearchWrap);


					this.removeEventListener('animationend', Listener);
				}
				BeforeIconClickView.addEventListener('animationend', Listener);
			});

			var MainHeader = document.querySelector('.main-header');
			var NavigationHeader = document.querySelector('.nav-header');
			function HeaderClick(event){
				//Animation
				if (SearchWrap.className.search('hide-content') != -1) return;
				NoMathes.classList.add('hide-content');
				SearchBox.value = '';
				RemoveOldSuggestions();
				RemoveResultList();
				MainHeader.style.paddingTop = null;
				SearchWrap.classList.add('animated', FadeAnimation);
				function Listener(event){
					this.classList.add('hide-content');
					this.classList.remove('animated', FadeAnimation);

					BeforeIconClickView.classList.remove('hide-content');
					BeforeIconClickView.classList.add('animated', AppearAnimation);
					function ListenerForBeforeIconClickView(event){
						this.classList.remove('animated', AppearAnimation);
						this.removeEventListener('animationend', ListenerForBeforeIconClickView);
					}
					BeforeIconClickView.addEventListener('animationend', ListenerForBeforeIconClickView);

					this.removeEventListener('animationend', Listener);
				}
				SearchWrap.addEventListener('animationend', Listener);
			}
			MainHeader.addEventListener('click', HeaderClick);
			NavigationHeader.addEventListener('click', HeaderClick);

		var RandomSearchButton = document.querySelector('.random-search-btn');
		RandomSearchButton.addEventListener('click', function(event){
			event.preventDefault();
			//same code as at magnifier button listener

			BeforeIconClickView.classList.add('animated', FadeAnimation);
				function Listener(event){
					this.classList.add('hide-content');
					this.classList.remove('animated', FadeAnimation);


					SearchWrap.classList.remove('hide-content');
					SearchWrap.classList.add('animated', AppearAnimation);
					function ListenerForSearchWrap(event){
						this.classList.remove('animated', AppearAnimation);
						SearchBox.focus();
						this.removeEventListener('animationend', ListenerForSearchWrap);
					}
					SearchWrap.addEventListener('animationend', ListenerForSearchWrap);
					RequestScript(WikiRandomUrl, function(Data){
						SearchBox.value = Data.query.random[0].title;
						CreateResultsList(WikiMainUrl, SearchBox.value);

					},
					function(){
						console.log('Smth went wrong');
					},
					'')
					this.removeEventListener('animationend', Listener);
				}
				BeforeIconClickView.addEventListener('animationend', Listener);
		});


















































	//IE polyfill



	/*
 * classList.js: Cross-browser full element.classList implementation.
 * 2014-07-23
 *
 * By Eli Grey, http://eligrey.com
 * Public Domain.
 * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
 */

/*global self, document, DOMException */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/

if ("document" in self) {

// Full polyfill for browsers with no classList support
if (!("classList" in document.createElement("_"))) {

(function (view) {

"use strict";

if (!('Element' in view)) return;

var
    classListProp = "classList"
  , protoProp = "prototype"
  , elemCtrProto = view.Element[protoProp]
  , objCtr = Object
  , strTrim = String[protoProp].trim || function () {
    return this.replace(/^\s+|\s+$/g, "");
  }
  , arrIndexOf = Array[protoProp].indexOf || function (item) {
    var
        i = 0
      , len = this.length
    ;
    for (; i < len; i++) {
      if (i in this && this[i] === item) {
        return i;
      }
    }
    return -1;
  }
  // Vendors: please allow content code to instantiate DOMExceptions
  , DOMEx = function (type, message) {
    this.name = type;
    this.code = DOMException[type];
    this.message = message;
  }
  , checkTokenAndGetIndex = function (classList, token) {
    if (token === "") {
      throw new DOMEx(
          "SYNTAX_ERR"
        , "An invalid or illegal string was specified"
      );
    }
    if (/\s/.test(token)) {
      throw new DOMEx(
          "INVALID_CHARACTER_ERR"
        , "String contains an invalid character"
      );
    }
    return arrIndexOf.call(classList, token);
  }
  , ClassList = function (elem) {
    var
        trimmedClasses = strTrim.call(elem.getAttribute("class") || "")
      , classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []
      , i = 0
      , len = classes.length
    ;
    for (; i < len; i++) {
      this.push(classes[i]);
    }
    this._updateClassName = function () {
      elem.setAttribute("class", this.toString());
    };
  }
  , classListProto = ClassList[protoProp] = []
  , classListGetter = function () {
    return new ClassList(this);
  }
;
// Most DOMException implementations don't allow calling DOMException's toString()
// on non-DOMExceptions. Error's toString() is sufficient here.
DOMEx[protoProp] = Error[protoProp];
classListProto.item = function (i) {
  return this[i] || null;
};
classListProto.contains = function (token) {
  token += "";
  return checkTokenAndGetIndex(this, token) !== -1;
};
classListProto.add = function () {
  var
      tokens = arguments
    , i = 0
    , l = tokens.length
    , token
    , updated = false
  ;
  do {
    token = tokens[i] + "";
    if (checkTokenAndGetIndex(this, token) === -1) {
      this.push(token);
      updated = true;
    }
  }
  while (++i < l);

  if (updated) {
    this._updateClassName();
  }
};
classListProto.remove = function () {
  var
      tokens = arguments
    , i = 0
    , l = tokens.length
    , token
    , updated = false
    , index
  ;
  do {
    token = tokens[i] + "";
    index = checkTokenAndGetIndex(this, token);
    while (index !== -1) {
      this.splice(index, 1);
      updated = true;
      index = checkTokenAndGetIndex(this, token);
    }
  }
  while (++i < l);

  if (updated) {
    this._updateClassName();
  }
};
classListProto.toggle = function (token, force) {
  token += "";

  var
      result = this.contains(token)
    , method = result ?
      force !== true && "remove"
    :
      force !== false && "add"
  ;

  if (method) {
    this[method](token);
  }

  if (force === true || force === false) {
    return force;
  } else {
    return !result;
  }
};
classListProto.toString = function () {
  return this.join(" ");
};

if (objCtr.defineProperty) {
  var classListPropDesc = {
      get: classListGetter
    , enumerable: true
    , configurable: true
  };
  try {
    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
  } catch (ex) { // IE 8 doesn't support enumerable:true
    if (ex.number === -0x7FF5EC54) {
      classListPropDesc.enumerable = false;
      objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
    }
  }
} else if (objCtr[protoProp].__defineGetter__) {
  elemCtrProto.__defineGetter__(classListProp, classListGetter);
}

}(self));

} else {
// There is full or partial native classList support, so just check if we need
// to normalize the add/remove and toggle APIs.

(function () {
  "use strict";

  var testElement = document.createElement("_");

  testElement.classList.add("c1", "c2");

  // Polyfill for IE 10/11 and Firefox <26, where classList.add and
  // classList.remove exist but support only one argument at a time.
  if (!testElement.classList.contains("c2")) {
    var createMethod = function(method) {
      var original = DOMTokenList.prototype[method];

      DOMTokenList.prototype[method] = function(token) {
        var i, len = arguments.length;

        for (i = 0; i < len; i++) {
          token = arguments[i];
          original.call(this, token);
        }
      };
    };
    createMethod('add');
    createMethod('remove');
  }

  testElement.classList.toggle("c3", false);

  // Polyfill for IE 10 and Firefox <24, where classList.toggle does not
  // support the second argument.
  if (testElement.classList.contains("c3")) {
    var _toggle = DOMTokenList.prototype.toggle;

    DOMTokenList.prototype.toggle = function(token, force) {
      if (1 in arguments && !this.contains(token) === !force) {
        return force;
      } else {
        return _toggle.call(this, token);
      }
    };

  }

  testElement = null;
}());

}

}
		</script>
	</body>
</html>
